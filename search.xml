<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title></title>
    <url>%2F2019%2F02%2F12%2FsetMonth%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[setMonth导致获取月份错误 问题重现 1234 // 比如今天是 2017-03-31 号，理论上后推一个月应该是4月 let now = new Date(new Date(&quot;2017-03-31&quot;).setMonth(new Date(&quot;2017-03-31&quot;).getMonth() + 1))console.log(&apos;now :&apos;, now.getMonth())// 结果是：now : 2017/5/1 上午8:00:00 实际的结果和预想的结果不一致！！ MDN解释： If you do not specify the dayValue parameter, the value returned from the getDate() method is used.If a parameter you specify is outside of the expected range, setMonth() attempts to update the date information in the Date object accordingly. For example, if you use 15 for monthValue, the year will be incremented by 1, and 3 will be used for month.The current day of month will have an impact on the behaviour of this method. Conceptually it will add the number of days given by the current day of the month to the 1st day of the new month specified as the parameter, to return the new date. For example, if the current value is 31st August 2016, calling setMonth with a value of 1 will return 2nd March 2016. This is because in 2016 February had 29 days. 查看MDN解释 简单来说就是：对当前的日期调用setMonth操作时，如果当前月份的天数大于新的月份天数，那么日期会依次向后推。1234567let now = new Date(new Date(&quot;2017-03-31&quot;).setMonth(new Date(&quot;2017-03-31&quot;).getMonth() + 1))console.log(&apos;now :&apos;, now.toLocaleString())// now : 2017/5/1 上午8:00:00// 2017-03-31 该月份有31天，当调用getMonth() + 1时// 理论上会加上当前月份的最大值31// 这时计算之后的日期是2017-04-31// 但是4月只有30天，所以后推一天变成2017-05-01,所以月份变成了5月 解决方法 setMonth之前先setDate(1) 12345678function getNextMonth(date) &#123; const now = new Date(date); now.setDate(1); now.setMonth(now.getMonth() + 1); return now.getMonth() + 1;&#125;console.log(getNextMonth(&quot;2017-03-31&quot;))// 4 结果正确]]></content>
  </entry>
</search>
